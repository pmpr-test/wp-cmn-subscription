<?php
/*   _______________________________________
    |  Obfuscated by PMPR - Php Obfuscator  |
    |             6800f6f59c461             |
    |_______________________________________|
*/
 namespace Pmpr\Common\Subscription; use Pmpr\Common\Foundation\Interfaces\Constants; use Pmpr\Common\Subscription\Model\Usage; use Pmpr\Common\Subscription\Model\Extra; use Pmpr\Common\Subscription\Model\Plan; use Pmpr\Common\Subscription\Model\Subscription; use WC_Coupon; use WC_Order_Item_Product; use WC_Product; use WC_Product_Variable; use WC_Product_Variation; use WP_Error; use WP_User; abstract class Engine extends Container { public function aackauiyyagmeqso(bool $gmcgeogogyqsgawk = false) : array { return $this->esqsaiqmmsyymoea()->qyaiiayimwmuomey($gmcgeogogyqsgawk); } public function giweasosqeiqeeqg() { return $this->weysguygiseoukqw(Setting::ysogiyumowssousm, 0); } public function cqgykysyamsccuyi() { return $this->weysguygiseoukqw(Setting::wsmyqwsuasaowuqg, 0); } public function ycmmosmyyiycyeug(bool $gmcgeogogyqsgawk = false) : array { $ksaameoqigiaoigg = []; $eoaogeociwkwuwgs = $this->giweasosqeiqeeqg(); $oymcauiugwyscqgs = $this->weysguygiseoukqw(Setting::wsmyqwsuasaowuqg, 0); if ($eoaogeociwkwuwgs && $oymcauiugwyscqgs) { $qecuekqmeaiykeek = $this->caokeucsksukesyo()->aqasygcsqysmmyke()->kaugocgyckysqucm($eoaogeociwkwuwgs, Constants::ckmqoekmugkggeym); if ($qecuekqmeaiykeek) { if ($gmcgeogogyqsgawk) { foreach ($qecuekqmeaiykeek as $isweyuoisomqyaag) { if ($qsqwqsymmqeoqwcu = $this->mcwgysaowamqkcsc($isweyuoisomqyaag, $oymcauiugwyscqgs)) { $ksaameoqigiaoigg[] = $qsqwqsymmqeoqwcu; } } } else { $ksaameoqigiaoigg = $qecuekqmeaiykeek; } } } return $ksaameoqigiaoigg; } public function mcwgysaowamqkcsc($isweyuoisomqyaag, $oymcauiugwyscqgs) : array { $qsqwqsymmqeoqwcu = []; if ($isweyuoisomqyaag instanceof WC_Product_Variation) { $usmsssmiougymckk = $this->caokeucsksukesyo()->aqasygcsqysmmyke(); $ckkqcoeeekoowmok = $usmsssmiougymckk->iooowgsqoyqseyuu($isweyuoisomqyaag); if ($oggygmyiawqsyecy = $this->gsmygqkksqsseoeq()) { $oggygmyiawqsyecy = $this->uwkmaywceaaaigwo()->owicscwgeuqcqaig()->yqymaqmqiqmmmsoo(['step' => 4, 'target' => $ckkqcoeeekoowmok, 'order_type' => 'extra'], $oggygmyiawqsyecy); } $qsqwqsymmqeoqwcu = [Constants::gouqcwikiiygyasc => $ckkqcoeeekoowmok, Constants::acymsykymkiewqsy => $usmsssmiougymckk->owuaywucuaiyocum($isweyuoisomqyaag), Constants::qescuiwgsyuikume => $usmsssmiougymckk->waecsyqmwascmqoa($isweyuoisomqyaag, $oymcauiugwyscqgs), Constants::ueasagmikqewqcay => $this->uwkmaywceaaaigwo()->wikusamwomuogoau()->aumscagymwyyicag($usmsssmiougymckk->owuaywucuaiyocum($isweyuoisomqyaag)), Constants::iikosyqiawkweouo => $usmsssmiougymckk->ccekeuwwqqoiwuwy($isweyuoisomqyaag), Constants::gsmygaomsmmwieku => $usmsssmiougymckk->ykeiaeskegyyeoau($isweyuoisomqyaag), Constants::iysgkeueasmuwmcq => $oggygmyiawqsyecy]; } return $qsqwqsymmqeoqwcu; } public function sosokoyeikoyqeqy() : array { $aeqcomiyowaiwgyg = []; if ($kekgkgqeyesmkywu = $this->aackauiyyagmeqso()) { $omouioamescuegke = $this->esqsaiqmmsyymoea(); foreach ($kekgkgqeyesmkywu as $gesuaewsacmmwoeo) { $aeqcomiyowaiwgyg[$omouioamescuegke->mwyqswsaeeewsosm($gesuaewsacmmwoeo)] = $this->ikacayyusswgaoeg($gesuaewsacmmwoeo); } } return $aeqcomiyowaiwgyg; } public function qsgsmeykqoqkmywq(array $ekuqiqmikiicgoss) : string { return (string) $this->caokeucsksukesyo()->ywqgcuymeiswqyqc()->get($ekuqiqmikiicgoss, Constants::cwuyiqcqccegmmis, Constants::kqesaikwiwcgimuk); } public function kgmkyususkuskmws(array $ekuqiqmikiicgoss) { return $this->caokeucsksukesyo()->ywqgcuymeiswqyqc()->get($ekuqiqmikiicgoss, Constants::ecygggyugmmoeaky); } public function ucqceiamukugecuu($cusggmuosggikeas, $smowyuyseuwiaiei) : array { return [Constants::ciywsqoeiymemsys => Constants::uasuowkaguiwoouw, Constants::mayesweykoooyugy => [], Constants::eoigaocgcaekssuw => [Constants::gouqcwikiiygyasc => 0, Constants::ciyoccqkiamemcmm => 0]]; } public function iimacqcwqcucqcwo($cusggmuosggikeas, $smowyuyseuwiaiei, string $iueymcwwscwqkiyq = Constants::amcogigwsaqssuai) : array { $ksaameoqigiaoigg = []; if ($smowyuyseuwiaiei > 0) { $ymkqyawksmqcgsei = $this->ucqceiamukugecuu($cusggmuosggikeas, $smowyuyseuwiaiei); if (Constants::gymusgeumuwomwuy === $ymkqyawksmqcgsei[Constants::ciywsqoeiymemsys]) { if ($ymkqyawksmqcgsei[Constants::eoigaocgcaekssuw][Constants::gouqcwikiiygyasc] > 0 && $ymkqyawksmqcgsei[Constants::eoigaocgcaekssuw][Constants::ciyoccqkiamemcmm] > 0) { $ksaameoqigiaoigg[] = $this->skkysuqqysioiwwg(Constants::eoigaocgcaekssuw, $ymkqyawksmqcgsei[Constants::eoigaocgcaekssuw][Constants::gouqcwikiiygyasc], $ymkqyawksmqcgsei[Constants::eoigaocgcaekssuw][Constants::ciyoccqkiamemcmm], $iueymcwwscwqkiyq); } if (!empty($ymkqyawksmqcgsei[Constants::mayesweykoooyugy]) && is_array($ymkqyawksmqcgsei[Constants::mayesweykoooyugy])) { foreach ($ymkqyawksmqcgsei[Constants::mayesweykoooyugy] as $qguauucmeiywiaue => $eqgoocgaqwqcimie) { $ksaameoqigiaoigg[] = $this->skkysuqqysioiwwg(Constants::mayesweykoooyugy, $qguauucmeiywiaue, $eqgoocgaqwqcimie, $iueymcwwscwqkiyq); } } } } return array_filter($ksaameoqigiaoigg); } public function ysqwckqmysqyuuow($wwcmeousycqgqwws, string $iueymcwwscwqkiyq) : array { return $this->uaikmqggwqeiigwe()->gssiscqyqsacmeca()->wqikesawekycweoi($wwcmeousycqgqwws, [Constants::ciywsqoeiymemsys => $iueymcwwscwqkiyq]); } public function skkysuqqysioiwwg($iakkeikwceeomgyq, $gykmkugsiwyssqis, int $smowyuyseuwiaiei, string $iueymcwwscwqkiyq = Constants::amcogigwsaqssuai) : int { $sogksuscggsicmac = $this->uaikmqggwqeiigwe()->gssiscqyqsacmeca()->gsegsiocqmsoayii([Constants::ciyoccqkiamemcmm => $smowyuyseuwiaiei, Constants::igecewwoemccgwsq => $iakkeikwceeomgyq, Constants::ciywsqoeiymemsys => $iueymcwwscwqkiyq, Constants::yocqkmeouaamomke => $gykmkugsiwyssqis]); return isset($sogksuscggsicmac[Constants::ckcawaoawwioqecq]) && $sogksuscggsicmac[Constants::ckcawaoawwioqecq] ? $sogksuscggsicmac[Constants::gouqcwikiiygyasc] : 0; } public function mkiwiwaquqeegaik($qamwkmomamooqqic, $iueymcwwscwqkiyq = Constants::eqewsqmqmsiocaeg) : ?array { $umwagewoweuckiso = null; if ($qamwkmomamooqqic) { if ($qamwkmomamooqqic instanceof WP_User) { $qamwkmomamooqqic = $this->caokeucsksukesyo()->issssuygyewuaswa()->iooowgsqoyqseyuu($qamwkmomamooqqic, true); } $umwagewoweuckiso = $this->ucugmoqeawkymskk()->qcgwasumiaaemeei($qamwkmomamooqqic, $iueymcwwscwqkiyq); } return $umwagewoweuckiso; } public function osqasmaiqokeemqy($cusggmuosggikeas = false, bool $gmcgeogogyqsgawk = false) : ?array { static $kekgkgqeyesmkywu; $gesuaewsacmmwoeo = null; if ($cusggmuosggikeas) { if ($cusggmuosggikeas instanceof WP_User) { $cusggmuosggikeas = $this->caokeucsksukesyo()->issssuygyewuaswa()->iooowgsqoyqseyuu($cusggmuosggikeas, true); } if (isset($kekgkgqeyesmkywu[$cusggmuosggikeas])) { $gesuaewsacmmwoeo = $kekgkgqeyesmkywu[$cusggmuosggikeas]; } else { if ($cusggmuosggikeas) { $omouioamescuegke = $this->esqsaiqmmsyymoea(); $omcwcsgeyeyoiwyi = $this->ucugmoqeawkymskk(); if ($umwagewoweuckiso = $omcwcsgeyeyoiwyi->qcgwasumiaaemeei($cusggmuosggikeas)) { $giuuywmgueegiiay = $omcwcsgeyeyoiwyi->waecsyqmwascmqoa($umwagewoweuckiso, Constants::kiwgokskimawckie); if ($giuuywmgueegiiay) { $gesuaewsacmmwoeo = $omouioamescuegke->iekyeyicoyyawomk()->akkkoiiymmamsauc($giuuywmgueegiiay); if ($gmcgeogogyqsgawk) { $gesuaewsacmmwoeo = $omouioamescuegke->scqakcemaqsqkema($gesuaewsacmmwoeo); } else { $gesuaewsacmmwoeo = (array) $gesuaewsacmmwoeo; } $gesuaewsacmmwoeo[Constants::uikygkewwaiowmwe] = $omcwcsgeyeyoiwyi->waecsyqmwascmqoa($umwagewoweuckiso, Constants::icymuyeowqaciyyu); } } } $kekgkgqeyesmkywu[$cusggmuosggikeas] = $gesuaewsacmmwoeo; } } return $gesuaewsacmmwoeo; } public function subscribe($cusggmuosggikeas, $gesuaewsacmmwoeo, array $msameyekicqaquew = []) { if (!$this->aiiaaeioukuaiuok($cusggmuosggikeas)) { $omouioamescuegke = $this->esqsaiqmmsyymoea(); $omcwcsgeyeyoiwyi = $this->ucugmoqeawkymskk(); if ($ogaeiucyqmowuqms = $omouioamescuegke->mwyqswsaeeewsosm($gesuaewsacmmwoeo)) { $icwicymcioeyeyek = $this->caokeucsksukesyo()->gyecsegqciqykomu()->ckscqqquyskscaaw($msameyekicqaquew, [Constants::kiwgokskimawckie => $ogaeiucyqmowuqms, Constants::ciywsqoeiymemsys => Constants::eqewsqmqmsiocaeg, Constants::icymuyeowqaciyyu => $omouioamescuegke->cskqgsqgkquceimo($gesuaewsacmmwoeo, Constants::kumuoysauoagaiiy), Constants::kuqwimiimiqsimgo => $cusggmuosggikeas]); $ksaameoqigiaoigg = $omcwcsgeyeyoiwyi->gssiscqyqsacmeca()->gsegsiocqmsoayii($icwicymcioeyeyek); if (!is_wp_error($ksaameoqigiaoigg)) { $ksaameoqigiaoigg = $ksaameoqigiaoigg[Constants::iikosyqiawkweouo]; } } else { $ksaameoqigiaoigg = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Plan id can not be retrieved.', PR__MDL__OPTIMIZATION)); } } else { $ksaameoqigiaoigg = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Already Subscribed.', PR__MDL__OPTIMIZATION)); } return $ksaameoqigiaoigg; } public function ccmqmqukumguweeu($cusggmuosggikeas, $smowyuyseuwiaiei, array $msameyekicqaquew = []) { $icwicymcioeyeyek = $this->caokeucsksukesyo()->gyecsegqciqykomu()->ckscqqquyskscaaw([Constants::ciyoccqkiamemcmm => (int) $smowyuyseuwiaiei, Constants::kuqwimiimiqsimgo => $cusggmuosggikeas], $msameyekicqaquew); $ksaameoqigiaoigg = $this->oisakkmieamkammc()->gssiscqyqsacmeca()->gsegsiocqmsoayii($icwicymcioeyeyek); if (!is_wp_error($ksaameoqigiaoigg)) { $ksaameoqigiaoigg = $ksaameoqigiaoigg[Constants::iikosyqiawkweouo]; } return $ksaameoqigiaoigg; } public function kcaaccuueqiwameg($cusggmuosggikeas) { $sogksuscggsicmac = true; if (!$this->aiiaaeioukuaiuok($cusggmuosggikeas)) { $sogksuscggsicmac = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(sprintf(__('%s must subscribe first.', PR__CMN__SUBSCRIPTION), $this->ogkiouuqqmaagscs($cusggmuosggikeas))); } return $sogksuscggsicmac; } public function eueeumkwymsyoacq($qamwkmomamooqqic, $ogaeiucyqmowuqms) { $sogksuscggsicmac = true; $agaucoqciakcuwkc = $this->ucugmoqeawkymskk()->waecsyqmwascmqoa($this->mkiwiwaquqeegaik($qamwkmomamooqqic), Constants::kiwgokskimawckie); $akqaumomesyiuiym = $this->imicysmecoiycoqc(); if ($agaucoqciakcuwkc && ($agaucoqciakcuwkc !== $akqaumomesyiuiym || $ogaeiucyqmowuqms === $akqaumomesyiuiym)) { $sogksuscggsicmac = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis($this->weysguygiseoukqw(Setting::uckosuiscwyyimgc, '')); } return $sogksuscggsicmac; } public function aiiaaeioukuaiuok($qamwkmomamooqqic = null) : bool { if (null === $qamwkmomamooqqic) { $qamwkmomamooqqic = $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); } return $this->ucugmoqeawkymskk()->maaqyamqwsosocii($qamwkmomamooqqic); } public function megowgmouaekgmuc(array $ywmkwiwkosakssii = []) { $uiwkaimiaukoeymk = []; if ($kekgkgqeyesmkywu = $this->aackauiyyagmeqso()) { foreach ($kekgkgqeyesmkywu as $gesuaewsacmmwoeo) { if ($uiwkaimiaukoeymk = $this->cmckygykskumaqqq($gesuaewsacmmwoeo, $ywmkwiwkosakssii)) { break; } } } return $uiwkaimiaukoeymk; } public function mcgwiiiuwoqaueqs($kqekumyckgkmomos) : bool { $weksiguqgqscsoee = false; foreach ($this->aackauiyyagmeqso() as $gesuaewsacmmwoeo) { $aeqcomiyowaiwgyg = $this->ikacayyusswgaoeg($gesuaewsacmmwoeo); if ($aeqcomiyowaiwgyg && isset($aeqcomiyowaiwgyg[$kqekumyckgkmomos])) { $weksiguqgqscsoee = true; break; } } return $weksiguqgqscsoee; } public function ikacayyusswgaoeg($gesuaewsacmmwoeo) : array { $aeqcomiyowaiwgyg = []; if ($acqqmqmcquukaqsc = $this->esqsaiqmmsyymoea()->waecsyqmwascmqoa($gesuaewsacmmwoeo, Constants::eeeoygaqqmoukaeg, [])) { foreach ($acqqmqmcquukaqsc as $ekuqiqmikiicgoss) { if (Constants::uueoqmeyyeiqyuku === $this->qsgsmeykqoqkmywq($ekuqiqmikiicgoss)) { $aeqcomiyowaiwgyg[$this->caokeucsksukesyo()->ywqgcuymeiswqyqc()->get($ekuqiqmikiicgoss, Constants::wqewegwyaeueiyae, 0)] = $ekuqiqmikiicgoss; } } } return $aeqcomiyowaiwgyg; } public function giecsykqamiookgq($product) : bool { $giecsykqamiookgq = false; if ($product) { $eoaogeociwkwuwgs = $this->weysguygiseoukqw(Setting::ysogiyumowssousm, 0); if ($eoaogeociwkwuwgs) { $usmsssmiougymckk = $this->caokeucsksukesyo()->aqasygcsqysmmyke(); $giecsykqamiookgq = $usmsssmiougymckk->iooowgsqoyqseyuu($product) == $eoaogeociwkwuwgs || $usmsssmiougymckk->qqiwsumoyiukmgco($product) === $eoaogeociwkwuwgs; } } return $giecsykqamiookgq; } public function cuisyayqcsoqcueq($product) : bool { $cuisyayqcsoqcueq = false; if ($product) { $cuisyayqcsoqcueq = in_array($this->caokeucsksukesyo()->aqasygcsqysmmyke()->iooowgsqoyqseyuu($product), $this->esqsaiqmmsyymoea()->ciygeaymmyosikog()); } return $cuisyayqcsoqcueq; } public function koeimwecyiiqgesk($qamwkmomamooqqic = false, array $ywmkwiwkosakssii = []) { $gwykaiwqgaycyggs = true; if (!$this->ymiqwioiwckiymgg($qamwkmomamooqqic, $ywmkwiwkosakssii)) { if ($kekgkgqeyesmkywu = $this->aackauiyyagmeqso()) { $omouioamescuegke = $this->esqsaiqmmsyymoea(); $gsqqgiwygsqmagmu = $this->osqasmaiqokeemqy($qamwkmomamooqqic); foreach ($kekgkgqeyesmkywu as $gesuaewsacmmwoeo) { if ($uiwkaimiaukoeymk = $this->cmckygykskumaqqq($gesuaewsacmmwoeo, $ywmkwiwkosakssii)) { if ($gsqqgiwygsqmagmu && (int) $omouioamescuegke->mwyqswsaeeewsosm($gesuaewsacmmwoeo) === (int) $omouioamescuegke->mwyqswsaeeewsosm($gsqqgiwygsqmagmu)) { $gwykaiwqgaycyggs = $uiwkaimiaukoeymk; $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug('User subscribed and has access to see this content.'); break; } $gwykaiwqgaycyggs = false; } else { $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug(sprintf('can not find any rule to match this content in plan %s.', $omouioamescuegke->mwyqswsaeeewsosm($gesuaewsacmmwoeo))); } } if (!$gwykaiwqgaycyggs) { $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug('user has not access to see this content.'); } } else { $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug('plans list is empty.'); } } else { $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug('Bypass by some conditions.'); } $sogksuscggsicmac = $this->ocksiywmkyaqseou("{$this->aakmagwggmkoiiyu()}_subscription_check_access_result", $gwykaiwqgaycyggs, $qamwkmomamooqqic, $ywmkwiwkosakssii, $this); if (!$gwykaiwqgaycyggs && $sogksuscggsicmac) { $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug('Filter give access to user.'); } return $sogksuscggsicmac; } public function cmckygykskumaqqq($gesuaewsacmmwoeo, array $ywmkwiwkosakssii = []) : array { $omouioamescuegke = $this->esqsaiqmmsyymoea(); $uiwkaimiaukoeymk = []; if ($acqqmqmcquukaqsc = $omouioamescuegke->waecsyqmwascmqoa($gesuaewsacmmwoeo, Constants::eeeoygaqqmoukaeg)) { $gkyciwoiiisgywcs = $this->caokeucsksukesyo()->ywqgcuymeiswqyqc(); $ywmkwiwkosakssii = $this->caokeucsksukesyo()->gyecsegqciqykomu()->ckscqqquyskscaaw($ywmkwiwkosakssii, [Constants::mgsccwumkcawaqcy => false, Constants::cwuyiqcqccegmmis => false]); $ccamueccusigaaio = $gkyciwoiiisgywcs->get($ywmkwiwkosakssii, Constants::mgsccwumkcawaqcy); $oqiawgmgsmuwyqkw = $gkyciwoiiisgywcs->get($ywmkwiwkosakssii, Constants::cwuyiqcqccegmmis); foreach ($acqqmqmcquukaqsc as $ekuqiqmikiicgoss) { $couuyeucwooyseic = $this->qsgsmeykqoqkmywq($ekuqiqmikiicgoss); if ($oqiawgmgsmuwyqkw && $oqiawgmgsmuwyqkw !== $couuyeucwooyseic) { continue; } if (Constants::uueoqmeyyeiqyuku === $couuyeucwooyseic) { $ockekyouswmoccck = $this->asiuuaqkuseoawmy($ccamueccusigaaio, $ekuqiqmikiicgoss); } else { $ockekyouswmoccck = $this->skwookiukacyyaeo($couuyeucwooyseic, $ccamueccusigaaio, $ekuqiqmikiicgoss, $ywmkwiwkosakssii); } if ($ockekyouswmoccck) { if (Constants::ccyeycyyykwuymsy === $gkyciwoiiisgywcs->get($ekuqiqmikiicgoss, Constants::wuawcaggsyeaaswe, Constants::ackcaikowcokggsc)) { $uiwkaimiaukoeymk = []; $this->caokeucsksukesyo()->mskuyeumceaigegs()->debug('this content excluded by rule.'); break; } $uiwkaimiaukoeymk = $ekuqiqmikiicgoss; } } } return $uiwkaimiaukoeymk; } public function asiuuaqkuseoawmy($kqekumyckgkmomos, array $ekuqiqmikiicgoss) : bool { $ackyuiceseoucyuw = false; if ($kqekumyckgkmomos && Constants::uueoqmeyyeiqyuku === $this->qsgsmeykqoqkmywq($ekuqiqmikiicgoss)) { $ackyuiceseoucyuw = (int) $kqekumyckgkmomos === (int) $this->caokeucsksukesyo()->ywqgcuymeiswqyqc()->get($ekuqiqmikiicgoss, Constants::wqewegwyaeueiyae, 0); } return $ackyuiceseoucyuw; } public function ymiqwioiwckiymgg($mkucggyaiaukqoce, array $ywmkwiwkosakssii = []) : bool { return $this->ocksiywmkyaqseou("{$this->aakmagwggmkoiiyu()}_subscription_check_access_bypass", false, $mkucggyaiaukqoce, $ywmkwiwkosakssii, $this); } public function ucygcmiuugoemkeo($oammesyieqmwuwyi) : bool { $skksumsyamssouqc = false; if (is_array($oammesyieqmwuwyi) && $oammesyieqmwuwyi) { $aqauykcugwiqkumq = $this->caokeucsksukesyo()->mmmcswscsiecscwg(); foreach ($oammesyieqmwuwyi as $igqsaukqcqscimok) { if ($igqsaukqcqscimok instanceof WC_Product && $this->cuisyayqcsoqcueq($igqsaukqcqscimok) || $this->cuisyayqcsoqcueq($aqauykcugwiqkumq->scwwywwaeuumakiq($igqsaukqcqscimok))) { $skksumsyamssouqc = true; break; } } } return $skksumsyamssouqc; } public function kwegekgiyuciuqyw($gesuaewsacmmwoeo) : string { $wmaeussqmywkecka = []; $omouioamescuegke = $this->esqsaiqmmsyymoea(); if (is_numeric($gesuaewsacmmwoeo)) { $gesuaewsacmmwoeo = $omouioamescuegke->iekyeyicoyyawomk()->akkkoiiymmamsauc($gesuaewsacmmwoeo); } if (is_object($gesuaewsacmmwoeo) || is_array($gesuaewsacmmwoeo)) { $megmggkiokqkcwou = $omouioamescuegke->waecsyqmwascmqoa($gesuaewsacmmwoeo, Constants::qscwcyiaqccoayqk, []); foreach ($megmggkiokqkcwou as $wiwcgykokegmceyk) { if ($cmwygeyygwqaemaq = $this->caokeucsksukesyo()->ywqgcuymeiswqyqc()->get($wiwcgykokegmceyk, Constants::TEXT)) { $wmaeussqmywkecka[] = $cmwygeyygwqaemaq; } } } return $this->iuygowkemiiwqmiw('features', [Constants::qscwcyiaqccoayqk => $wmaeussqmywkecka], ['class' => __CLASS__]); } public function qkgmskycwcyagggm(string $uusmaiomayssaecw, ?string $cmwygeyygwqaemaq, array $wwgucssaecqekuek = []) : string { $wwgucssaecqekuek = $this->caokeucsksukesyo()->gyecsegqciqykomu()->ckscqqquyskscaaw($wwgucssaecqekuek, ['href' => '#', 'class' => 'button', 'aria-label' => $cmwygeyygwqaemaq, Constants::qescuiwgsyuikume => $cmwygeyygwqaemaq]); $qookweymeqawmcwo = [Constants::ascagqcquwgmygkm => $uusmaiomayssaecw, Constants::TEXT => $cmwygeyygwqaemaq, Constants::ysskgssgwuwmqwym => $wwgucssaecqekuek]; $qookweymeqawmcwo = $this->ocksiywmkyaqseou("{$this->aakmagwggmkoiiyu()}_subscription_action_parameters", $qookweymeqawmcwo, $uusmaiomayssaecw); $qookweymeqawmcwo = $this->ocksiywmkyaqseou("{$this->aakmagwggmkoiiyu()}_subscription_{$uusmaiomayssaecw}_action_parameters", $qookweymeqawmcwo); return $this->iuygowkemiiwqmiw('action', $qookweymeqawmcwo, ['class' => __CLASS__]); } public function wmsewmwmcaiioeyo($gesuaewsacmmwoeo, $cusggmuosggikeas, bool $igaomgqeiueaakmk = true) { $omouioamescuegke = $this->esqsaiqmmsyymoea(); if (Constants::eqewsqmqmsiocaeg === $omouioamescuegke->ogegcqqcukiaqscy(Constants::ciywsqoeiymemsys, $gesuaewsacmmwoeo)) { if ($umkkkaqkwugkemce = $omouioamescuegke->waecsyqmwascmqoa($gesuaewsacmmwoeo, Constants::uecoocasykucckuu)) { if ($igaomgqeiueaakmk && $this->aiiaaeioukuaiuok($cusggmuosggikeas)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis($this->weysguygiseoukqw(Setting::uckosuiscwyyimgc, '')); } $ekymkycgewkiouqe = $this->caokeucsksukesyo()->wikusamwomuogoau(); foreach ($ekymkycgewkiouqe->ygywcicqqwcumoku() as $igqsaukqcqscimok) { $product = $igqsaukqcqscimok[Constants::uiwqcumqkgikqyue] ?? null; if ($this->cuisyayqcsoqcueq($product)) { return $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis($this->weysguygiseoukqw(Setting::mimegqqmowgwyqsu, '')); } } $ksaameoqigiaoigg = $umkkkaqkwugkemce; } else { $ksaameoqigiaoigg = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Plan is not ready to add to cart, please contact us.', PR__CMN__SUBSCRIPTION)); } } else { $ksaameoqigiaoigg = $this->caokeucsksukesyo()->euekiyuksecoccus()->gosmqcmmomkqwmis(__('Plan is not active right now, pleas choice another plan.', PR__CMN__SUBSCRIPTION)); } return $ksaameoqigiaoigg; } public function egsmaieicsomeyse(string $iiumgusgeekimkya, $qamwkmomamooqqic, string $ggauoeuaesiymgee = '') : string { $ksaameoqigiaoigg = ''; $uamcoiueqaamsqma = $this->weysguygiseoukqw($iiumgusgeekimkya, $ggauoeuaesiymgee); if (!$uamcoiueqaamsqma) { $uamcoiueqaamsqma = $ggauoeuaesiymgee; } if ($uamcoiueqaamsqma && $qamwkmomamooqqic) { $gsqqgiwygsqmagmu = $this->osqasmaiqokeemqy($qamwkmomamooqqic, true); if ($gsqqgiwygsqmagmu && isset($gsqqgiwygsqmagmu[Constants::qescuiwgsyuikume], $gsqqgiwygsqmagmu[Constants::uikygkewwaiowmwe])) { $meqocwsecsywiiqs = $gsqqgiwygsqmagmu[Constants::qescuiwgsyuikume]; if (isset($gsqqgiwygsqmagmu[Constants::quumookoiuysuyuw]) && $gsqqgiwygsqmagmu[Constants::quumookoiuysuyuw]) { $meqocwsecsywiiqs = $gsqqgiwygsqmagmu[Constants::quumookoiuysuyuw]; } $ksaameoqigiaoigg = $this->caokeucsksukesyo()->owgcciayoweymuws()->qquwggyuqouqumam($uamcoiueqaamsqma, [Constants::sicsskuogummkkgi => $meqocwsecsywiiqs, Constants::gyusqcgoiwogaaoy => $this->caokeucsksukesyo()->gagsyqagguwwauac()->ekasyoagocygouom($gsqqgiwygsqmagmu[Constants::uikygkewwaiowmwe]), Constants::ugwaqgyaoewamgyc => $this->kwegekgiyuciuqyw($gsqqgiwygsqmagmu)]); $ksaameoqigiaoigg = $this->uwkmaywceaaaigwo()->gyecsegqciqykomu()->aqiqkkuauegomyoi($ksaameoqigiaoigg); } } return $ksaameoqigiaoigg; } public function ogkiouuqqmaagscs($cusggmuosggikeas = null) : ?string { $pkyyagewkiyckmwy = null; $cusggmuosggikeas = $this->eyymssiiosygicem($cusggmuosggikeas); if ($cusggmuosggikeas instanceof WP_User) { $pkyyagewkiyckmwy = $this->caokeucsksukesyo()->issssuygyewuaswa()->ygwimyogyaqgumam($cusggmuosggikeas, Constants::cuyqkgecokgmcwqu, true); } return $pkyyagewkiyckmwy; } public function eyymssiiosygicem($cusggmuosggikeas = null) { if (!$cusggmuosggikeas) { $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); } return $this->caokeucsksukesyo()->issssuygyewuaswa()->get($cusggmuosggikeas); } public function cemugskuuywigaig($cawesmkieccckaae) { if ($cawesmkieccckaae instanceof WC_Order_Item_Product) { $qamwkmomamooqqic = $cawesmkieccckaae->get_meta(Constants::kuqwimiimiqsimgo); } else { if (is_array($cawesmkieccckaae)) { $qamwkmomamooqqic = $cawesmkieccckaae[Constants::kuqwimiimiqsimgo] ?? 0; } else { $qamwkmomamooqqic = $this->uwkmaywceaaaigwo()->issssuygyewuaswa()->qyeguewwsmosqcwc(); } } return $qamwkmomamooqqic; } public function imicysmecoiycoqc() : int { return (int) $this->weysguygiseoukqw(Setting::gccwqcewuysckgic, 0); } public abstract function aakmagwggmkoiiyu() : string; public abstract function esqsaiqmmsyymoea() : Plan; public abstract function uaikmqggwqeiigwe() : Usage; public abstract function oisakkmieamkammc() : Extra; public abstract function ucugmoqeawkymskk() : Subscription; public abstract function skwookiukacyyaeo($sqeykgyoooqysmca, $ccamueccusigaaio, array $ekuqiqmikiicgoss = [], array $ywmkwiwkosakssii = []) : bool; public abstract function gsmygqkksqsseoeq() : string; }
